<nav class="navbar navbar-expand-lg  p-3">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo01"
    aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarTogglerDemo01">
    <a class="navbar-brand" href="#"><img src="../assets/img/285656_movie_icon.svg"></a>
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item active">
        <a class="nav-link" href="#">Banco Guayaquil - <span class="sr-only">Test - Gerardo Machuca Morán</span></a>
      </li>
      <!-- <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Disabled</a>
      </li> -->
    </ul>
    <span *ngIf="authService.isLoggedIn()" class="navbar-text ms-auto">
      ¡Hola, {{ authService.getUser()?.name }}!
    </span>
    <span *ngIf="authService.isLoggedIn()" (click)="onLogout()" class="btn btn-link">Cerrar sesión</span>
    <button *ngIf="!authService.isLoggedIn()" class="btn btn-link ms-auto" (click)="openModal(ModalIniciarSesion)">
      Iniciar Sesion
    </button>
  </div>
</nav>

<div class="container">

  <div *ngIf="!authService.isLoggedIn()" class="mt-4">
    <!-- <div class="alert alert-primary text-center" role="alert">
      Inicia sesión para mostrate tus preferencias
    </div> -->
    <div class="alert alert-primary" role="alert">
      <h4 class="alert-heading">¡Hola, cinéfilo/a!</h4>
      <p>Regístrate o inicia sesión para desbloquear funciones exclusivas, como la capacidad de guardar tus películas
        favoritas y recibir recomendaciones basadas en tus preferencias.</p>
      <!-- <hr>
      <p class="mb-0">Whenever you need to, be sure to use margin utilities to keep things nice and tidy.</p> -->
    </div>
  </div>
</div>
<div class="container-fluid">
  <div *ngIf="authService.isLoggedIn()" class="card mt-5">
    <div class="card-header">
      <h5 class="card-title">Recomendadas</h5>
    </div>
    <div class="card-body">
      <div id="movieCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner ">
          <div class="carousel-item active">
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5">
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5">
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Agregar más elementos .carousel-item según la cantidad de películas -->
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#movieCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#movieCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>



  <!--terror-->
  <div class="card mt-5">
    <div class="card-header">
      <h5 class="card-title">Terror</h5>
    </div>
    <div class="card-body">
      <div id="movieCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner ">
          <div class="carousel-item active">
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5">
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-5">
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col">
                <div class="card card-movie">
                  <img src="https://portadascreativas.com/wp-content/uploads/Matrix.jpg" class="card-img-top img-fluid"
                    alt="Imagen de la película">
                  <div class="card-body">
                    <h5 class="card-title">Título de la película</h5>
                    <p class="card-text">Descripción de la película</p>
                    <div class="d-flex justify-content-between">
                      <span class="badge bg-secondary">Género</span>
                      <span class="badge bg-secondary">Edad</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Agregar más elementos .carousel-item según la cantidad de películas -->
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#movieCarousel" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#movieCarousel" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>

</div>


<ng-template #ModalIniciarSesion let-modal>
  <form #RegisterForm="ngForm" (ngSubmit)="OnLogIn(modal)">
    <div class="modal-header">
      <h5 class="modal-title">Iniciar Sesión</h5>
      <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="form-group">
          <label for="registerMail">Email</label>
          <div class="col-auto">
            <input type="email" class="form-control" id="registerMail" name="registerMail" required
              [(ngModel)]="userRegister.mail" #registerMail="ngModel"
              pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}">
            <div *ngIf="registerMail.invalid && (registerMail.dirty || registerMail.touched)" class="text-danger">
              <div *ngIf="registerMail.errors?.['required']">El email es requerido</div>
              <div *ngIf="registerMail.errors?.['pattern']">No se permiten espacios en blanco</div>
            </div>
          </div>
        </div>

        <div class="form-group mt-3">
          <label for="registerPassword">Contraseña</label>
          <div class="col-auto">
            <input type="password" class="form-control" id="registerPassword" name="registerPassword" required
              [(ngModel)]="userRegister.password" #registerPassword="ngModel" pattern="^(?!\s*$).+">
            <div *ngIf="registerPassword.invalid && (registerPassword.dirty || registerPassword.touched)"
              class="text-danger">
              <div *ngIf="registerPassword.errors?.['required']">La contraseña es requerida</div>
              <div *ngIf="registerPassword.errors?.['pattern']">No se permiten espacios en blanco</div>
            </div>
          </div>
        </div>
        <div class="col-12">
          <button type="button" class="btn btn-link mt-2 float-end" (click)="openModalRegistrar(myModal,modal)">
            Registrarse
          </button>
        </div>
      </div>


    </div>
    <div class="modal-footer">
      <button type="submit" [disabled]="RegisterForm.invalid" class="btn btn-success">Iniciar Sesión</button>
      <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Cerrar</button>
    </div>
  </form>
</ng-template>

<ng-template #myModal let-modal>
  <form #RegisterForm="ngForm" (ngSubmit)="OnRegister(modal)">
    <div class="modal-header">
      <h5 class="modal-title">Nuevo Usuario</h5>
      <button type="button" class="btn-close" (click)="modal.dismiss()"></button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="form-group">
          <label for="registerName">Nombres</label>
          <div class="col-auto">
            <input type="text" class="form-control" id="registerName" name="registerName" required
              [(ngModel)]="userRegister.names" #registerName="ngModel" pattern="^(?!\s*$).+"
              title="No se permiten espacios en blanco">
            <div *ngIf="registerName.invalid && (registerName.dirty || registerName.touched)" class="text-danger">
              <div *ngIf="registerName.errors?.['required']">El nombre es requerido</div>
              <div *ngIf="registerName.errors?.['pattern']">No se permiten espacios en blanco</div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="registerMail">Email</label>
          <div class="col-auto">
            <input type="email" class="form-control" id="registerMail" name="registerMail" required
              [(ngModel)]="userRegister.mail" #registerMail="ngModel"
              pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}">
            <div *ngIf="registerMail.invalid && (registerMail.dirty || registerMail.touched)" class="text-danger">
              <div *ngIf="registerMail.errors?.['required']">El email es requerido</div>
              <div *ngIf="registerMail.errors?.['pattern']">No se permiten espacios en blanco</div>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="registerPassword">Contraseña</label>
          <div class="col-auto">
            <input type="password" class="form-control" id="registerPassword" name="registerPassword" required
              [(ngModel)]="userRegister.password" #registerPassword="ngModel" pattern="^(?!\s*$).+">
            <div *ngIf="registerPassword.invalid && (registerPassword.dirty || registerPassword.touched)"
              class="text-danger">
              <div *ngIf="registerPassword.errors?.['required']">La contraseña es requerida</div>
              <div *ngIf="registerPassword.errors?.['pattern']">No se permiten espacios en blanco</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="submit" [disabled]="RegisterForm.invalid" class="btn btn-success">Registrarse</button>
      <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Cerrar</button>
    </div>
  </form>
</ng-template>
